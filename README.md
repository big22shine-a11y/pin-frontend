# Pin Map ðŸ—ºï¸

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç”»åƒä¸Šã«ãƒ”ãƒ³ã‚’é…ç½®ãƒ»å…±æœ‰ã§ãã‚‹ Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

## ðŸŒŸ ä¸»ãªæ©Ÿèƒ½

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- è¤‡æ•°ã®ãƒ–ãƒ©ã‚¦ã‚¶/ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰åŒæ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- ãƒ”ãƒ³ã®é…ç½®ãƒ»å‰Šé™¤ãŒã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åæ˜ 
- Firebase Realtime Database ã‚’ä½¿ç”¨ã—ãŸé«˜é€ŸåŒæœŸ

### è‡ªå‹•å‰Šé™¤ã‚·ã‚¹ãƒ†ãƒ 
- ä½œæˆã•ã‚ŒãŸãƒ”ãƒ³ã¯ **60ç§’å¾Œã«è‡ªå‹•çš„ã«æ¶ˆãˆã‚‹**
- 60ç§’é–“ã‹ã‘ã¦ãƒ•ã‚§ãƒ¼ãƒ‰ï¼ˆé€æ˜Žåº¦ï¼‰ãŒå¤‰ã‚ã‚Šã€è¦–è¦šçš„ã«å‰Šé™¤ã‚’äºˆå‘Š
- ã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§åŒæ™‚ã«å‰Šé™¤
- ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨å¤ã„ãƒ”ãƒ³ã¯è¡¨ç¤ºã•ã‚Œãªã„

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ä¸è¦** - ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨è‡ªå‹•çš„ã«åŒ¿åãƒ­ã‚°ã‚¤ãƒ³
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®æ“ä½œæ¨©é™ç®¡ç†
- **è‡ªåˆ†ã®ãƒ”ãƒ³ã®ã¿å‰Šé™¤å¯èƒ½** - ä»–äººãŒé…ç½®ã—ãŸãƒ”ãƒ³ã¯å‰Šé™¤ä¸å¯
- æ‰‹å‹•ã§å‰Šé™¤ã§ãã‚‹ã®ã¯ä½œæˆã‹ã‚‰60ç§’ä»¥å†…ã®ãƒ”ãƒ³

### åˆ¶é™æ©Ÿèƒ½
- **1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Šæœ€å¤§5å€‹ã®ãƒ”ãƒ³** ã¾ã§ã‚’åŒæ™‚é…ç½®å¯èƒ½
- 6å€‹ç›®ã‚’é…ç½®ã—ã‚ˆã†ã¨ã—ãŸå ´åˆã¯ UI ã§ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
- å‰Šé™¤ã™ã‚Œã°ã¾ãŸæ–°ã—ã„ãƒ”ãƒ³ã‚’é…ç½®å¯èƒ½

### ãƒ­ã‚°ä¿å­˜ãƒ»ç”»åƒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- ãƒ”ãƒ³ä½œæˆæ™‚ã«æ—¥æ¬¡ãƒ­ã‚°ã¸ä¿å­˜ï¼ˆ`pin_logs/YYYY-MM-DD`ï¼‰
- æ—¥ä»˜ã‚­ãƒ¼ã¯ **æ—¥æœ¬æ™‚é–“ï¼ˆJSTï¼‰åŸºæº–** ã§ç”Ÿæˆ
- ã€Œä»Šæ—¥ã®ãƒ­ã‚°ã‚’ç”»åƒã¨ã—ã¦ä¿å­˜ã€ã§å½“æ—¥ã®å…¨ãƒ­ã‚°ãƒ”ãƒ³ã‚’PNGã¨ã—ã¦ä¿å­˜å¯èƒ½
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã¯ã‚¯ãƒ­ãƒ¼ãƒ³DOMã‚’ä½¿ã†ãŸã‚ã€è¡¨ç¤ºä¸­ã®ãƒ”ãƒ³ã«ã¯å½±éŸ¿ã—ãªã„

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **Firebase App Check** ã‚’æœ‰åŠ¹åŒ–ï¼ˆreCAPTCHA v3ï¼‰
- ãƒœãƒƒãƒˆã‹ã‚‰ã®ç„¡è¨±å¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢
- Firebase Realtime Database ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹æ¨©é™åˆ¶å¾¡

## ðŸŽ® ä½¿ã„æ–¹

1. **ãƒšãƒ¼ã‚¸ã‚’é–‹ã**
   - https://waddle-dx.github.io/pin-map/
   - è‡ªå‹•çš„ã«åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³

2. **ãƒ”ãƒ³ã‚’é…ç½®**
   - ç”»åƒä¸Šã®ä»»æ„ã®å ´æ‰€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒ”ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - ãƒ”ãƒ³ã®è‰²ã‚’ã‚ã‚‰ã‹ã˜ã‚ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã§é¸æŠžå¯èƒ½

3. **ãƒ”ãƒ³ã®ç¢ºèª**
   - ãƒ”ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ”ãƒ³ã®æƒ…å ±ãŒè¡¨ç¤º
     - è‰²
     - é…ç½®ã—ãŸæ™‚åˆ»
     - å‰Šé™¤å¯å¦ï¼ˆè‡ªåˆ†ã®ãƒ”ãƒ³ãªã‚‰ã€Œå‰Šé™¤å¯ã€ï¼‰

4. **ãƒ”ãƒ³ã‚’å‰Šé™¤**
   - ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠžã—ãŸãƒ”ãƒ³
   - è‡ªåˆ†ãŒé…ç½®ã—ãŸãƒ”ãƒ³ãªã‚‰ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹
   - ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ‰‹å‹•å‰Šé™¤
   - ã¾ãŸã¯60ç§’å¾…ã¤ã¨è‡ªå‹•å‰Šé™¤

5. **ä»Šæ—¥ã®ãƒ­ã‚°ã‚’ç”»åƒä¿å­˜**
  - ã€Œä»Šæ—¥ã®ãƒ­ã‚°ã‚’ç”»åƒã¨ã—ã¦ä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
  - å½“æ—¥ï¼ˆJSTï¼‰ã® `pin_logs` ã‚’å–å¾—ã—ã¦ç”»åƒåŒ–
  - `moomin-map-log-YYYY-MM-DD.png` ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

## ðŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: HTML5, CSS3, Vanilla JavaScript
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Firebase Realtime Database
- **èªè¨¼**: Firebase Anonymous Authentication
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: Firebase App Check (reCAPTCHA v3)
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: GitHub Pages

## ðŸ“Š ãƒ”ãƒ³ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼

å„ãƒ”ãƒ³ã¯ä»¥ä¸‹ã®æƒ…å ±ã‚’æŒã¡ã¾ã™ï¼š

```json
{
  "xPct": 0.5,           // Xåº§æ¨™ï¼ˆæ­£è¦åŒ–ã€0-1ï¼‰
  "yPct": 0.3,           // Yåº§æ¨™ï¼ˆæ­£è¦åŒ–ã€0-1ï¼‰
  "color": "#FF0000",    // ãƒ”ãƒ³ã®è‰²
  "createdAt": "2026-02-15T10:00:00.000Z",  // ISOå½¢å¼ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  "createdAtMs": 1708019760000,             // ãƒŸãƒªç§’å˜ä½ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  "createdBy": "user_uid"                   // ä½œæˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€æ„è­˜åˆ¥å­
}
```

## âš™ï¸ ç’°å¢ƒå¤‰æ•°ãƒ»è¨­å®š

Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã¯ `index.html` ã«ç›´æŽ¥åŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã¾ã™ï¼š

- **Project ID**: `moomin-test-127ad`
- **API Key**: Firebase Console ã§ç®¡ç†
- **App Check Key**: reCAPTCHA v3 ã‚­ãƒ¼

## ðŸ”’ Firebase Realtime Database ãƒ«ãƒ¼ãƒ«

```javascript
{
  "rules": {
    "pins": {
      ".read": true,
      "$pinId": {
        ".write": "auth != null && (\n          (!data.exists() && newData.child('createdBy').val() == auth.uid) ||\n          (data.exists() && data.child('createdBy').val() == auth.uid) ||\n          (data.exists() && !newData.exists())\n        )",
        ".validate": "!newData.exists() || (\n          newData.hasChildren(['xPct','yPct','color','createdAt','createdAtMs','createdBy']) &&\n          newData.child('xPct').isNumber() &&\n          newData.child('yPct').isNumber() &&\n          newData.child('xPct').val() >= 0 && newData.child('xPct').val() <= 1 &&\n          newData.child('yPct').val() >= 0 && newData.child('yPct').val() <= 1 &&\n          newData.child('color').isString() &&\n          newData.child('createdBy').isString() &&\n          newData.child('createdAtMs').isNumber()\n        )"
      }
    }
  }
}
```

**ãƒ«ãƒ¼ãƒ«ã®èª¬æ˜Žï¼š**
- èª­ã¿è¾¼ã¿: èª°ã§ã‚‚å¯èƒ½
- æ›¸ãè¾¼ã¿:
  - æ–°è¦ä½œæˆ: ä½œæˆè€…ã®ã¿
  - æ›´æ–°: ä½œæˆè€…ã®ã¿
  - å‰Šé™¤: ä½œæˆè€… OR èª°ã§ã‚‚å¯èƒ½ï¼ˆ60ç§’çµŒéŽå¾Œï¼‰
- æ¤œè¨¼: å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åž‹ãƒã‚§ãƒƒã‚¯ã€åº§æ¨™ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯

## ðŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ðŸ¤ è²¢çŒ®

Issues ã‚„ Pull Requests ã‚’æ­“è¿Žã—ã¾ã™ã€‚

ç”»åƒã®ä¸Šã«ãƒ”ãƒ³ã‚’ç«‹ã¦ã¦ã€ãƒ ãƒ¼ãƒŸãƒ³ãŸã¡ã®å‡ºç¾ç®‡æ‰€ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å…±æœ‰ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚µã‚¤ãƒˆã§ã™ã€‚é¸ã‚“ã ã‚­ãƒ£ãƒ©è‰²ã®ãƒ”ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã§é…ç½®ã§ãã€ä¸€å®šæ™‚é–“ã§è‡ªå‹•çš„ã«æ¶ˆãˆã¾ã™ã€‚

## ä½¿ã„æ–¹
- `index.html` ã‚’é–‹ã„ã¦è¡¨ç¤ºã—ã¾ã™ï¼ˆGitHub Pages é…ä¿¡ã«å¯¾å¿œï¼‰ã€‚
- ç”»åƒã¯ `map.jpg` ã‚’ç”¨æ„ã—ã¦ãã ã•ã„ã€‚
- Firebase Realtime Database ã‚’ä½¿ã†å ´åˆã¯ã€`index.html` ã® `window.FIREBASE_CONFIG` ã‚’è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## æ³¨æ„
- Firebase ã‚’ä½¿ã†å ´åˆã¯ã€å…¬é–‹ã‚µã‚¤ãƒˆå‘ã‘ã®ãƒ«ãƒ¼ãƒ«è¨­å®šãŒå¿…é ˆã§ã™ã€‚
- æ›´æ–°ãŒåæ˜ ã•ã‚Œãªã„ã¨ãã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚
- ok

